"use strict";let jm=[];const n=new Map();const t=document.getElementById("mmt");const f=document.getElementById("c-f");const mms=document.getElementById("mms");const my=document.querySelector("meta[property='rs:yes']")["content"];const mp=document.querySelector("meta[property='rs:pig']")["content"];const mw=document.querySelector("meta[property='rs:warn']")["content"];const mn=document.querySelector("meta[property='rs:no']")["content"];const lang=document.querySelector("meta[property='rs:lang']")["content"];const lr=/^https?:\/\/.*$/i;function s(s){const a=document.createElement("a");const i=document.createElement("img");if(s==="yes"){i.src="yes.png";i.alt="✅";i.title=my;a.href="#ms-y";}else if(s==="pig"){i.src="pig.png";i.alt="🐽";i.title=mp;a.href="#ms-p";}else if(s==="warn"){i.src="warn.png";i.alt="⚠️";i.title=mw;a.href="#ms-w";}else if(s==="no"){i.src="no.png";i.alt="❌";i.title=mn;a.href="#ms-n";}else{return null;}a.classList.add("ndd");a.appendChild(i);return a;}async function cb(){const r=await fetch("https://intrnl-api.ru/rs.json");const lm=r.headers.get("Last-Modified");const lmd=lm&&Intl.DateTimeFormat([lang,"en","en-US"],{day:"numeric",month:"long",year:"numeric"}).format(Date.parse(lm));if(lmd)document.getElementById("met").innerText=lmd;const j=await r.json();jm=j["mods"]}function sp(m){if(m.state==="no")return 4;if(m.state==="warn")return 3;if(m.state==="pig")return 2;if(m.state==="yes")return 1;return 0;}function am({id,name,url,state,notes}){if(!id||!name||!url||!state||!lr.test(url))return;const st=s(state);if(!st)return;const r=t.insertRow(-1);const a=document.createElement("a");a.innerText=name;a.href=url;a.target="_blank";a.classList.add("nd");r.id=`mm-${id}`;const c=r.insertCell(0);c.appendChild(a);r.insertCell(1).appendChild(st);const no=notes&&(notes[lang]||notes["en"]);if(!no)return;let i=n.get(no);if(!i){i=(f.childElementCount+1).toString();const fli=document.createElement("li");const fsm=document.createElement("small");const fsu=document.createElement("sup");const fsa=document.createElement("a");fsa.innerText=i;fsu.appendChild(fsa);fsm.appendChild(fsu);fsm.appendChild(document.createTextNode(` ${no}`));fli.appendChild(fsm);fli.id=`c-f${i}`;fsa.href=`#${fli.id}`;f.appendChild(fli);n.set(no,i);}const ns=document.createElement("sup");const na=document.createElement("a");na.innerText=i;na.title=no;na.href=`#c-f${i}`;na.classList.add("nd");ns.appendChild(na);c.appendChild(ns);}cb().then(ra).catch(()=>{});function ra(){t.childNodes.forEach(c=>c.remove());jm.sort((f,s)=>sp(f)-sp(s)).forEach(am);}